<%
  if (type.compareTo("relationship") == 0 || type.compareTo("all") == 0)
  {
    Concept concept_curr = (Concept) request.getSession().getAttribute("concept");
    String scheme_curr = (String) request.getSession().getAttribute("dictionary");
    String version_curr = null;
    String code_curr = (String) request.getSession().getAttribute("code");
    
    DataUtils util = new DataUtils();

    HashMap hmap = util.getAssociationTargetHashMap(scheme_curr, version_curr, code_curr);
    Vector superconcept_vec = (Vector) hmap.get("Parent");
    Vector subconcept_vec = (Vector) hmap.get("Child");
    Vector broader_vec = (Vector) hmap.get("Broader");
    Vector narrower_vec = (Vector) hmap.get("Narrower");
    Vector sibling_vec = (Vector) hmap.get("Sibling");
    Vector other_vec = (Vector) hmap.get("Other");
        
    String label = "";
    //rel + "|" + c..getEntityDescription().getContent() + "|" + c.getEntityCode() + "|" + source
   
%>
  <h2>Relationships with other NCI MetaThesaurus Concepts:</h2>
  <p>
    <%
      label = "Parent Concepts:";
      if (superconcept_vec.size() <= 0)
      {
    %>
        <b><%=label%></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><%=label%></b>
	<table class="dataTable">
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<superconcept_vec.size(); i++) {
	      String s = (String) superconcept_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>

  <p>
    <%
      label = "Child Concepts:";
      if (subconcept_vec.size() <= 0)
      {
    %>
        <b><%=label%></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><%=label%></b>
	<table class="dataTable">
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<subconcept_vec.size(); i++) {
	      String s = (String) subconcept_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>
  
  <p>
    <%
      label = "Broader Concepts:";
      if (broader_vec.size() <= 0)
      {
    %>
        <b><%=label%></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><%=label%></b>
	<table class="dataTable">
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<broader_vec.size(); i++) {
	      String s = (String) broader_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td><%=relationship_name%></td>
		      <td>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  

  <p>
    <%
      label = "Narrower Concepts:";
      if (narrower_vec.size() <= 0)
      {
    %>
        <b><%=label%></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><%=label%></b>
	<table class="dataTable">
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<narrower_vec.size(); i++) {
	      String s = (String) narrower_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td><%=relationship_name%></td>
		      <td>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  

  <p>
    <%
      label = "Sibling Concepts:";
      if (sibling_vec.size() <= 0)
      {
    %>
        <b><%=label%></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><%=label%></b>
	<table class="dataTable">
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<sibling_vec.size(); i++) {
	      String s = (String) sibling_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td><%=relationship_name%></td>
		      <td>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  

  <p>
    <%
      label = "Other Relationships:";
      if (other_vec.size() <= 0)
      {
    %>
        <b><%=label%></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><%=label%></b>
	<table class="dataTable">
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<other_vec.size(); i++) {
	      String s = (String) other_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td><%=relationship_name%></td>
		      <td>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  
 

<%
}
%>