<script type="text/javascript">
function cursor_wait() {
   document.body.style.cursor = 'wait';
}

function disableAnchor(){

  var obj1 = document.getElementById("a_tpTab");
  if (obj1 != null) obj1.removeAttribute('href');

  var obj2 = document.getElementById("a_relTab");
  if (obj2 != null) obj2.removeAttribute('href');

  var obj3 = document.getElementById("a_synTab");
  if (obj3 != null) obj3.removeAttribute('href');

  var obj4 = document.getElementById("a_srcTab");
  if (obj4 != null) obj4.removeAttribute('href');

  var obj5 = document.getElementById("a_allTab");
  if (obj5 != null) obj5.removeAttribute('href');

  var obj6 = document.getElementById("a_hierBut");
  if (obj6 != null) obj6.removeAttribute('href');

}

</script>

<FORM NAME="searchTerm" METHOD="POST" CLASS="search-form" onsubmit="javascript:disableAnchor();">
  <%
    String match_text = gov.nih.nci.evs.browser.utils.HTTPUtils.cleanXSS((String) request.getSession().getAttribute("matchText"));
    if (match_text == null) match_text = "";
    String ranking_str = gov.nih.nci.evs.browser.utils.HTTPUtils.cleanXSS((String) request.getSession().getAttribute("ranking"));
    boolean is_ranking = true;
    if (ranking_str == null) // Set default for first time.
      is_ranking = false;
    else if (ranking_str.equalsIgnoreCase("false"))
      is_ranking = false;
    String check_ranking = is_ranking ? "checked" : "";
  %>
  <input CLASS="searchbox-input"
    name="matchText"
    value="<%=match_text%>"
    onFocus="active = true" onBlur="active = false" onkeypress="return submitEnter('search',event)"
  />
  <h:commandButton
    id="search"
    value="Search"
    action="#{userSessionBean.searchAction}"
    onclick="javascript:cursor_wait();"
    image="#{facesContext.externalContext.requestContextPath}/images/search.gif"
    alt="Search">
  </h:commandButton>
  <h:outputLink value="#{facesContext.externalContext.requestContextPath}/pages/help.jsf#searchhelp">
    <h:graphicImage value="/images/search-help.gif" style="border-width:0;"/>
  </h:outputLink>


  <%
    String algorithm = gov.nih.nci.evs.browser.utils.HTTPUtils.cleanXSS((String) request.getSession().getAttribute("selectedAlgorithm"));
    String check_e = "", check_b = "", check_s = "" , check_c ="";
    if (algorithm == null || algorithm.compareTo("exactMatch") == 0)
      check_e = "checked";
    else if (algorithm.compareTo("startsWith") == 0)
      check_s= "checked";
    else if (algorithm.compareTo("DoubleMetaphoneLuceneQuery") == 0)
      check_b= "checked";
    else
      check_c = "checked";


  %>
  <!--
  <input type="radio" name="algorithm" value="DoubleMetaphoneLuceneQuery" alt="Best Match" <%=check_b%>>Best Match&nbsp;

  styleClass="textbody"
  -->
  <input type="radio" name="algorithm" value="exactMatch" alt="Exact Match" <%=check_e%>>Exact&nbsp;
  <input type="radio" name="algorithm" value="startsWith" alt="Begins With" <%=check_s%>>Begins With&nbsp;
  <input type="radio" name="algorithm" value="contains" alt="Containts" <%=check_c%>>Contains&nbsp;
  <input type="checkbox" name="ranking" <%= check_ranking %>>Rank
  <br/>
    <h:outputLabel
      id="sourceLabel"
      value="Source"
      styleClass="textbody"
    >

      <h:selectOneMenu id="source" value="#{userSessionBean.selectedSource}" valueChangeListener="#{userSessionBean.sourceSelectionChanged}" immediate="true">
           <f:selectItems value="#{userSessionBean.sourceList}"/>
      </h:selectOneMenu>

  </h:outputLabel>

 </FORM>