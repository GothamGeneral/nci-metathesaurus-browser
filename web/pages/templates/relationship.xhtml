<%
  if (type.compareTo("relationship") == 0 || type.compareTo("all") == 0)
  {
    Concept concept_curr = (Concept) request.getSession().getAttribute("concept");
    String scheme_curr = (String) request.getSession().getAttribute("dictionary");
    String version_curr = null;
    String code_curr = (String) request.getSession().getAttribute("code");
    
    DataUtils util = new DataUtils();

    HashMap hmap = util.getAssociationTargetHashMap(scheme_curr, version_curr, code_curr);
    Vector superconcept_vec = (Vector) hmap.get("Parent");
    Vector subconcept_vec = (Vector) hmap.get("Child");
    Vector broader_vec = (Vector) hmap.get("Broader");
    Vector narrower_vec = (Vector) hmap.get("Narrower");
    Vector sibling_vec = (Vector) hmap.get("Sibling");
    Vector other_vec = (Vector) hmap.get("Other");
        
    String label = "";
    String rel_value = "";
    //rel + "|" + c..getEntityDescription().getContent() + "|" + c.getEntityCode() + "|" + source
   
%>
  <h2>Relationships with other NCI MetaThesaurus Concepts:</h2>
  
<P/>
<TABLE BORDER="0" WIDTH="100%" bgcolor="#ffffff" cellpadding="5" cellspacing="0">
<TR>
<TD align="center"><b>
<A HREF="#Parent">Parent&nbsp;Concepts</A> |
<A HREF="#Child">Child&nbsp;Concepts</A> |
<A HREF="#Broader">Broader&nbsp;Concepts</A> |
<A HREF="#Narrower">Narrower&nbsp;Concepts</A> |
<A HREF="#Sibling">Sibling&nbsp;Concepts</A> |
<A HREF="#Other">Other&nbsp;Related&nbsp;Concepts</A>
</TD>
</TR>
</table>  
  
  <p>
    <%
      label = "Parent Concepts:";
      rel_value = "Parent";
      if (superconcept_vec.size() <= 0)
      {
    %>
        <b><a name="Parent"><%=label%><a></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><a name="Parent"><%=label%><a></b>
	<table class="dataTable" width=800>
	  <th class="dataTableHeader" scope="col" align="left">Relationship</th>
	  <th class="dataTableHeader" scope="col" align="left">Rel. Attribute</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<superconcept_vec.size(); i++) {
	      String s = (String) superconcept_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td width=60><%=rel_value%></td>
		      <td width=250><%=relationship_name%></td>
		      <td width=400>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td width=90>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>

  <p>
    <%
      label = "Child Concepts:";
      rel_value = "Child";
      if (subconcept_vec.size() <= 0)
      {
    %>
        <b><a name="Child"><%=label%><a></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><a name="Child"><%=label%><a></b>
	<table class="dataTable" width=800>
	  <th class="dataTableHeader" scope="col" align="left">Relationship</th>
	  <th class="dataTableHeader" scope="col" align="left">Rel. Attribute</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<subconcept_vec.size(); i++) {
	      String s = (String) subconcept_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td width=60><%=rel_value%></td>
		      <td width=250><%=relationship_name%></td>
		      <td width=400>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td width=90>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>
  
  <p>
    <%
      label = "Broader Concepts:";
      rel_value = "Broader";
      if (broader_vec.size() <= 0)
      {
    %>
        <b><a name="Broader"><%=label%><a></b><i>(none)</i>
    <%
      } else {
    %>
        <b><a name="Broader"><%=label%><a></b>
	<table class="dataTable" width=800>
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Rel. Attribute</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<broader_vec.size(); i++) {
	      String s = (String) broader_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td width=60><%=rel_value%></td>
		      <td width=250><%=relationship_name%></td>
		      <td width=400>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td width=90>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  

  <p>
    <%
      label = "Narrower Concepts:";
      rel_value = "Narrower";
      if (narrower_vec.size() <= 0)
      {
    %>
        <b><a name="Narrower"><%=label%><a></b> <i>(none)</i>
    <%
      } else {
    %>
        <b><a name="Narrower"><%=label%><a></b>
	<table class="dataTable" width=800>
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Rel. Attribute</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<narrower_vec.size(); i++) {
	      String s = (String) narrower_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td width=60><%=rel_value%></td>
		      <td width=250><%=relationship_name%></td>
		      <td width=400>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td width=90>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  

  <p>
    <%
      label = "Sibling Concepts:";
      rel_value = "Sibling";
      if (sibling_vec.size() <= 0)
      {
    %>
        <b><a name="Sibling"><%=label%><a> <i>(none)</i>
    <%
      } else {
    %>
        <b><a name="Sibling"><%=label%><a>
	<table class="dataTable" width=800>
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Rel. Attribute</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<sibling_vec.size(); i++) {
	      String s = (String) sibling_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td width=60><%=rel_value%></td>
		      <td width=250><%=relationship_name%></td>
		      <td width=400>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td width=90>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  

  <p>
    <%
      label = "Other Relationships:";
      rel_value = "Other";
      if (other_vec.size() <= 0)
      {
    %>
        <b><a name="Other"><%=label%><a> <i>(none)</i>
    <%
      } else {
    %>
        <b><a name="Other"><%=label%><a>
	<table class="dataTable" width=800>
          <th class="dataTableHeader" scope="col" align="left">Relationship</th>
          <th class="dataTableHeader" scope="col" align="left">Rel. Attribute</th>
          <th class="dataTableHeader" scope="col" align="left">Name</th>
          <th class="dataTableHeader" scope="col" align="left">Source</th>
	  <%
	    int n2 = 0;
	    for (int i=0; i<other_vec.size(); i++) {
	      String s = (String) other_vec.get(i);
	      Vector ret_vec = DataUtils.parseData(s, "|");
	      String relationship_name = (String) ret_vec.elementAt(0);
	      String target_concept_name = (String) ret_vec.elementAt(1);
	      String target_concept_code = (String) ret_vec.elementAt(2);
	      String rel_sab = (String) ret_vec.elementAt(3);

	      if (n2 % 2 == 0) {
		%>
		    <tr class="dataRowDark">
		<%
		} else {
		%>
		    <tr class="dataRowLight">
		<%
		}
		n2++;
		%>
		      <td width=60><%=rel_value%></td>
		      <td width=250><%=relationship_name%></td>
		      <td width=400>
			<a href="<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI%20MetaThesaurus&code=<%=target_concept_code%>">
			  <%=target_concept_name%>
			</a>
		      </td width=90>
		      <td><%=rel_sab%></td>
		    </tr>
		<%
		}
		%>
	 </table>
    <%
      }
    %>
  </p>  
 
<P/>
<TABLE BORDER="0" WIDTH="100%" bgcolor="#ffffff" cellpadding="5" cellspacing="0">
<TR>
<TD align="center"><b>
<A HREF="#Parent">Parent&nbsp;Concepts</A> |
<A HREF="#Child">Child&nbsp;Concepts</A> |
<A HREF="#Broader">Broader&nbsp;Concepts</A> |
<A HREF="#Narrower">Narrower&nbsp;Concepts</A> |
<A HREF="#Sibling">Sibling&nbsp;Concepts</A> |
<A HREF="#Other">Other&nbsp;Related&nbsp;Concepts</A>
</TD>
</TR>
</table>  
<%
}
%>